<div>
    <div class="container my-5 contenido-contacto">
        <div class="row justify-content-center">
            <div class="col-lg-8 col-md-10">

                <!-- üîπ Encabezado fuera del form -->
                <div class="text-center mb-4">
                    <h2 class="fw-bold" style="color: var(--azul-oscuro);">Cont√°ctanos</h2>
                    <p class="text-muted mb-0">¬øNecesitas atenci√≥n m√©dica o tienes consultas? ¬°Estamos aqu√≠ para ayudarte!</p>
                </div>
                <div class="card p-3 shadow-sm">
                    <div class="d-flex align-items-center gap-2 mb-3 contact-heading">
                        <!-- Icono m√©dico -->
                        <svg class="contact-icon" viewBox="0 0 24 24" fill="none" stroke-width="2">
                            <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.29 1.51 4.04 3 5.5l7 7Z"
                                stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" />
                            <path d="M12 5L8 21l4-7 4 7-4-16" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>

                        <!-- Bloque de texto -->
                        <div>
                            <h5 class="mb-0 fw-bold" style="color: var(--azul-oscuro);">Env√≠anos tu consulta m√©dica</h5>
                            <small class="d-block contact-subtitle">
                                Completa el formulario y nuestro equipo m√©dico te responder√° a la brevedad
                            </small>
                        </div>
                    </div>
                    <form [formGroup]="form" (ngSubmit)="onSubmit()" novalidate>

                        <!-- Nombre -->
                        <div class="mb-3">
                            <label class="form-label fw-semibold">Nombre</label>
                            <input class="form-control" formControlName="nombre" placeholder="Tu nombre completo">
                            <div class="invalid-feedback d-block" *ngIf="nombre.touched && nombre.invalid">
                                El nombre es obligatorio (m√≠nimo 2 caracteres).
                            </div>
                        </div>

                        <!-- Correo -->
                        <div class="mb-3">
                            <label class="form-label fw-semibold">Correo electr√≥nico</label>
                            <input type="email" class="form-control" formControlName="correo"
                                placeholder="tu@correo.com">
                            <div class="invalid-feedback d-block" *ngIf="correo.touched && correo.invalid">
                                Ingresa un correo v√°lido.
                            </div>
                        </div>

                        <!-- Tel√©fono (opcional) -->
                        <div class="mb-3">
                            <label class="form-label fw-semibold">Tel√©fono (opcional)</label>
                            <input type="tel" class="form-control" formControlName="telefono" placeholder="987654321">
                            <div class="invalid-feedback d-block" *ngIf="telefono.touched && telefono.invalid">
                                Tel√©fono inv√°lido.
                            </div>
                        </div>

                        <!-- Tipo de consulta -->
                        <div class="mb-3">
                            <label class="form-label fw-semibold">Tipo de consulta</label>
                            <select class="form-select" formControlName="tipoConsulta">
                                <option value="" disabled>Selecciona el tipo</option>
                                <option *ngFor="let t of tiposConsulta" [value]="t">{{ t }}</option>
                            </select>
                            <div class="invalid-feedback d-block" *ngIf="tipoConsulta.touched && tipoConsulta.invalid">
                                Selecciona el tipo de consulta.
                            </div>
                        </div>

                        <!-- Asunto -->
                        <div class="mb-3">
                            <label class="form-label fw-semibold">Asunto</label>
                            <input class="form-control" formControlName="asunto"
                                placeholder="Ej: Consulta sobre cardiolog√≠a, cita urgente, etc.">
                            <div class="invalid-feedback d-block" *ngIf="asunto.touched && asunto.invalid">
                                El asunto es obligatorio (m√≠nimo 3 caracteres).
                            </div>
                        </div>

                        <!-- Mensaje -->
                        <div class="mb-3">
                            <label class="form-label fw-semibold">Mensaje</label>
                            <textarea rows="4" class="form-control" formControlName="mensaje"
                                placeholder="Describe tu consulta m√©dica, s√≠ntomas, o cualquier informaci√≥n relevante que nos ayude a brindarte la mejor atenci√≥n..."></textarea>
                            <div class="invalid-feedback d-block" *ngIf="mensaje.touched && mensaje.invalid">
                                El mensaje es obligatorio (10‚Äì1000 caracteres).
                            </div>
                        </div>

                        <!-- Acciones -->
                        <div class="text-center">
                            <button type="submit" class="btn btn-lg w-100" style="background: var(--verde); color: var(--blanco); border: none;"
                                [disabled]="sending || form.invalid" aria-busy="{{sending}}">
                                <i class="bi bi-hospital"></i>
                                <span *ngIf="sending" class="align-middle">
                                    <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
                                    Enviando consulta‚Ä¶
                                </span>
                                <span *ngIf="!sending">Enviar consulta m√©dica</span>
                            </button>
                        </div>

                        <!-- Estados -->
                        <div class="alert alert-success mt-3" *ngIf="sentOk === true">
                            ‚úÖ ¬°Gracias! Tu consulta m√©dica fue enviada correctamente. Nuestro equipo se pondr√° en contacto contigo pronto.
                        </div>
                        <div class="alert alert-danger mt-3" *ngIf="sentOk === false">
                            ‚ùå Ocurri√≥ un error al enviar tu consulta. Por favor, int√©ntalo nuevamente o llama a nuestro n√∫mero de emergencia.
                        </div>
                    </form>
                </div>

            </div>
        </div>
    </div>
</div>